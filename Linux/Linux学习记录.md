# Linux的目录结构

- /bin（重点）
    - 是Binary的缩写, 这个目录存放着最经常使用的命令
    
- /sbin
    - s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序
    
- /home（重点）
    - 存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般
      该目录名是以用户的账号命名的
      
- /root（重点）
    - 该目录为系统管理员，也称作超级权限者的用户主目录
    
- /lib
    - 系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几
      乎所有的应用程序都需要用到这些共享库
      
- /lost+found
    - 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
    
- /etc（重点）
    - 所有的系统管理所需要的配置文件和子目录 my.conf
    
- /usr
    - 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与
      windows下的program files目录
      
- /boot（重点）
    - 存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件

- /proc（和Linux内核相关，一般不动）
    - 这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息
    
- /srv（和Linux内核相关，一般不动）
    - service缩写，该目录存放一些服务启动之后需要提取的数据

- /sys（和Linux内核相关，一般不动）
    - service缩写，该目录存放一些服务启动之后需要提取的数据
    
- /tmp
    - 这个目录是用来存放一些临时文件的
    
- /dev
    - 类似于windows的设备管理器，把所有的硬件用文件的形式存储
    
- /media（重点）
    - linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux
      会把识别的设备挂载到这个目录下
      
- /mnt
    - 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里的内容了。 d:/myshare
    
- /opt
    - 这是给主机额外安装软件所摆放的目录。如安装ORACLE数据库就可放到该目录下。
      默认为空
      
- /usr/local（重点）
    - 这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序
    
- /var（重点）
    - 这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。
      包括各种日志文件
      
- /selinux
    - SELinux是一种安全子系统,它能控制程序只能访问特定文件
    
# Linux目录总结

1. Linux的目录下有且只有一个根目录 /
2. Linux的各个目录存放的内容是规划好的，不要乱放文件
3. Linux是以文件的形式来管理我们的设备，因此Linux系统中，一切皆为文件
4. Linux的各个文件目录下，存放什么内容，必须有一个认识
5. 学习完后，脑海应该有一棵Linux目录树

# Linux vi和vim 编辑器

## vi和vim的三种常见模式

- 正常模式
    > 在正常模式下，我们可以使用快捷键。 以 vim 打开一个档案就直接进入一般模式了(这是默认的模式)。在这个模式中，你可以使用『上 下左右』按键来移动光标，你可以使用『删除字符』或『删除整行』来处理档案内容， 也可以使用 『复制、贴上』来处理你的文件数据

- 插入模式（编辑模式）
    > 在模式下，程序员可以输入内容。 按下 i, I, o, O, a, A, r, R 等任何一个字母之后才会进入编辑模式, 一般来说按 i 即可

- 命令行模式
    > 在这个模式当中， 可以提供你相关指令，完成读取、存盘、替换、离开 vim 、显示行号等的动 作则是在此模式中达成的！
  
  ## 常用快捷键
  
- yy
  - 普通模式下，拷贝当前行。黏贴则按p。
  
- 5yy
    - 普通模式下，拷贝光标后的5行（所以先要移动到要复制的那5行之前的一行先），黏贴也是按p。
    
- dd
    - 普通模式下，删除当前行
    
- 5dd
    - 一次性删除光标下的5行
    
- 查询
    - 命令行模式下，输入/，再输入要查找的字符。例如/hello，就是查找关键字为hello的文本，有多个结果时，按n键移动到下一个。

- 显示行号和取消显示行号（行数很多时使用）
    - 命令行模式下，输入:，再输入set nu显示行号。要取消显示行号则输入:set nonu
    
- 跳转到文本的最末行和最首行
    - 正常模式下，输入G，跳转到最末行。输入gg，则跳转到最首行。

- 回退、撤销功能
    - 在正常模式下，输入u，即可回退上次输入的内容。
    
- 让光标移动到指定行
    - 普通模式下，输入行号（注意：不会有输入产生!），再按shit + g，即可让光标移动，一般会先让行号显示，才知道有多少行。
    
# Linux 系统相关

## 关机和重启命令

- shutdown命令
    - shutdown -h now：表示立即关机
    - shutdown -h 1：表示1分钟过后关机
    - shutdown -r now：表示立即重启
    
- halt
    - 直接使用即可，效果等价于关机
    
- reboot
    - 重启系统
    
- sync
    - 把内存中的数据，同步到磁盘上，执行后是看不到效果的（避免数据丢失，建议在关机之前都执行）
    
## 用户的登录和注销

## 基本介绍

- 登录时尽量少用 root 帐号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利 用普通用户登录，登录后再用”su - 用户名’命令来切换成系统管理员身份。
- 在提示符下输入 logout 即可注销用户。

## 使用细节

- logout 注销命令，在图形界面上的终端运行是无效的，在运行级别3下有效，就是远程登录下进行logout命令注销是有效的

# Linux 用户管理

- 概念：
    - 每个用户，可以有多个组，用组来管理用户，以及用户的权限。
    - 每个用户，有自己一个家目录，每个用户登录时，都会自动进入自己用户的家目录下。用家目录，来规定用户在自己的目录下用。

- 说明：
    - Linux 系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向 系统管理员申请一个账号，然后以这个账号的身份进入系统。 
    - Linux 的用户需要至少要属于一个组。
    
## 添加用户

- 语法
    - useradd [选项] 用户名，创建用户
    - useradd -d 目录名 用户名，例如：useradd -d /home/tiger/ xh，意思时创建一个xh用户，并指定它的家目录为 /home/tiger，注意目录不要事先创建，必须目录不存在才行

- 细节
    - 当用户创建后，默认会创建一个和用户名同名的家目录，在/home/目录下可以见到
    
## 指定或修改密码

- 语法
    - passwd 用户名，给指定用户设置密码，需要输入2次密码进行确认
    
## 删除用户

- 语法
    - userdel 用户名
    
- 案例
    - 删除xm用户，但保留家目录。userdel xm
    - 删除xm用户，家目录也一起删除，使用-r参数。userdel -r xm

- 细节
    - 一般删除用户时，不会删除家目录
    
## 查询用户

- 基本语法
    - id 用户名
    
- 案例
    - 查询root用户的用户信息：id root，输出uid=(root) gid=0(root) 组=0(root)。表示root用户的id为0，组的id为0，组名为root。
    - 查询xq用户的用户信息：id xq，输出uid=(xq) gid=501(xq) 组=501(xq)
    
- 注意
    - 如果用户不存在，则输出无此用户
    
## 切换用户

当我们在操作Linux时，如果当前用户的权限不够，则可以通过 su - 指令，切换到高权限用户，比如root

- 语法
    - su - 用户名

- 案例
    - 创建一个用户zf，指定密码，然后切换到zf用户
        - useradd zf，创建用户
        - passwd zf，指定用户的密码
        - su - zf，切换到zf用户
        - exit，退出zf用户，切换到原来的用户，例如root

- 细节
    - 从权限高的用户，切换到权限低的用户，不需要密码，反之则需要。
    - 当需要原来的用户时，使用exit指令。
    
## 查看当前用户

- 语法
    - whoami
    
# 用户组

类似于角色，系统可以对有共性的多个用户进行统一的管理

## 新增组（创建组）

- 语法
    - groupadd 组名
    
- 增加用户时，就指定组
    - useradd -g 用户组 用户名

- 案例
    - 增加zwj用户，并且直接指定到wudang组
        - groupadd wudang，新建wudang组
        - useradd -g wudang zwj，新增zwj用户，并指定为wudang组
        - id zwj，查询zwj用户的信息，输出uid=503(zwj) gid=503(wudang) 组=503(wudang)
    
##删除组

- 语法
    - groupdel 组名
    
## 修改用户的组

- 语法
    - usermod -g 用户组 用户名
    
- 案例
    - 创建一个shaolin组，将zwj修改到shaolin组，不在wudang组
        - groupadd shaolin，新增shaolin组
        - usermod -g shaolin zwj，将zwj的组修改为shaolin
        - id zwj，查看zwj的用户信息，uid=503(zwj) gid=504(shaolin) 组=504(shaolin)
        
## /etc/passwd 文件

用户（user）的配置文件，记录用户的各种信息

- root:x:0:0:root:/root:/bin/bash
- zf:x:502:502::/home/zf:/bin/bash
- zwj:x:503:504::/home/zwj:/bin/bash

每行的含义：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录 Shell

## /etc/shadow 文件

口令的配置文件

- root:$6$PO73HfawEuegVIfS$OxGAx6TzOYSwImLYbyqq.ERoDLZHeAw9OYLseV3H99rTbffNLq/ssiqLG87kX7nSVlAH.qPDX4vT1XAUAOvZc/:18486:0:99999:7:::
- zf:$6$41mu2iCP$jerQRpDcmqQC7XvnQawEu6FaNSCRv8Ot5MlW30q9ai7YKecGHH3.WnLk0N52Q.pc8xbI/SxWJHtqFmSdVSj2k/:18486:0:99999:7:::
- zwj:!!:18486:0:99999:7:::
每行的含义：登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动 时间:失效时间:标志

## /etc/group 文件

组(group)的配置文件，记录 Linux 包含的组的信息

- xm:x:500:
- xq:x:501:
- zf:x:502:
- wudang:x:503:
- shaolin:x:504:

每行含义：组名:口令:组标识号:组内用户列表

# Linux 实用指令

## 指定运行级别

- 0 ：关机
- 1 ：单用户【找回丢失密码】
- 2：多用户状态没有网络服务
- 3：多用户状态有网络服务
- 4：系统未使用保留给用户
- 5：图形界面
- 6：系统重启

1. 常用运行级别是 3 和 5
2. 要修改默认的运行级别可改文件 /etc/inittab 的 id:5:initdefault:这一行中的数字

### 切换到指定的运行级别的指令

- 语法
    - init [012356]，注意4是保留的，不能使用
    
- 案例
    - 通过 init 来切换不同的运行级别，比如从 5 切换到 3（从图形界面切换到命令行界面） ， 然后关机
    - init 3，切换到命令行界面
    - init 5，切换到图形界面
    - init 0，关机

- 面试题
    - 如何找回丢失的root密码
    - 思路：进入到单用户模式，修改root密码。（因为进入到单用户模式，root不需要密码就可以登录）
    - 步骤：开机->在引导时输入 回车键-> 看到一个界面输入 e（edit编辑） -> 看到一个新的界面，选中第二行（编辑 内核）在输入 e -> 在这行最后输入 1（设置运行级别为1，就是单用户模式） ,再输入 回车键 -> 再次输入 b（表示boot重新引导） ,这时就会进入到单用户模式。 这时，我们就进入到单用户模式，使用 passwd 指令来修改 root 密码。
    
- 练习
    - 请设置我们的 运行级别，linux 运行后，直接进入到 命令行界面。（即进入到 3 运行级别 vim /etc/inittab）
    - 答：将 id:5:initdefault:这一行中的数字, 5 这个数字改成对应的运行级别即可。
    
## 帮助指令

当我们对某个指令不熟悉时，我们可以使用 Linux 提供的帮助指令来了解这个指令的使用方法。

### man命令 获取帮助信息

- 语法
    - man [命令或配置文件]（功能描述：获得帮助信息）

- 案例
    - 使用man命令查询ls命令的帮助信息，man ls
    
### help命令

- 语法
    - help 命令 （功能描述：获得 shell 内置命令的帮助信息）
    
- 案例
    - 使用help命令，查询cd命令的帮助信息，help cd
    
## 文件目录类指令

### pwd 指令

- 语法
    - pwd (功能描述：显示当前工作目录的绝对路径)
    
### ls 指令

- 语法
    - ls [选项] [目录或是文件]

- 常用选项
    - `-a` ：显示当前目录所有的文件和目录，包括隐藏的。
    - `-l` ：以列表的方式显示信息
    
- 案例
    - 以列表形式，显示当前目录的所有文件，包括隐藏的：输入ls -al
    
### cd 指令

- 语法
    - cd [参数] (功能描述：切换到指定目录)
    
- 常用参数
    - cd ~ 或者 cd ：回到自己的家目录
    - cd .. 回到当前目录的上一级目录
    
- 案例
    - 使用绝对路径切换到 root 目录：cd /root
    - 当前在/usr/lib，使用相对路径到/root 目录（上一层目录是user，再上一层才是根目录）：../../root
    - 回到当前目录的上一级目录：cd ..
    - 回到家目录：cd ~ 或者直接cd，就回到当前登录用户的家目录
    
### mkdir 指令

mkdir 指令用于创建目录(make directory)

- 语法
    - mkdir [选项] 要创建的目录
    
- 常用选项
    - `-p` ：创建多级目录
    
- 案例
    - 创建一个目录 /home/dog，输入：mkdir /home/dog
    - 创建多级目录 /home/animal/tiger，输入：mkdir -p /home/animal/tiger
    
### rmdir 指令

rmdir 指令删除空目录

- 语法
    - rmdir [选项] 要删除的空目录
    
- 细节
    - rmdir 删除的是空目录，如果目录下有内容时无法删除的。
    - 提示：如果需要删除非空目录，需要使用 rm -rf 要删除的目录。

- 案例
    - 删除一个目录 /home/dog，输入：rmdir /home/dog
    - 删除一个目录，目录内有文件 /home/animal/tiger，输入：rm -rf /home/animal/tiger
    
### touch 指令

touch 指令创建空文件

- 语法
    - touch 文件名称
    
- 细节
    - touch后面可以跟多个文件名，代表一次性创建多个文件
    
- 案例
    - 创建一个hello.txt的空文件，输入：touch hello.txt
    - 一次性创建2个空文件，ok1.text和ok2.text。输入：touch ok1.txt ok2.txt
    
### cp 指令[重要]

cp 指令拷贝文件到指定目录

- 语法
    - cp [选项] source dest，source为源目录，dest为目标目录
    
- 常用选项
    - `-r` ：递归复制整个文件夹

- 细节
    - 当复制时，有文件相同，会询问是否覆盖，将 cp 改为 \cp 即代表为强制覆盖，则不询问了

- 案例
    - 将 /home/aaa.txt 拷贝到 /home/bbb 目录下[拷贝单个文件]，输入：
        - touch aaa.txt，创建aaa.txt文件
        - mkdir bbb，创建bbb文件夹
        - cp aaa.txt bbb/，拷贝aaa.txt文件到当前目录下的bbb目录内
    - 将/home/test 整个目录拷贝到 /home/zwj 目录
        - cp -r test/ zwj/，因为test目录下有文件，拷贝整个test目录到zwj目录时是不可以的，需要加上-r参数进行递归拷贝

### rm 指令

rm 指令移除【删除】文件或目录

- 语法
    - rm [选项] 要删除的文件或目录
    
- 常用选项
    - `-r` ：递归删除整个文件夹
    - `-f` ： 强制删除不提示
    
- 案例
    - 将 /home/aaa.txt 删除，输入：rm aaa.txt（会询问是否删除），不想询问则使用：rm -f aaa.txt
    - 递归删除整个文件夹 /home/bbb，输入：rm -rf bbb/
    
### mv 指令

mv 移动文件与目录或重命名

- 语法
    - mv oldNameFile newNameFile (功能描述：重命名）
    - mv /temp/movefile /targetFolder (功能描述：移动文件)
    
- 案例
    - 将 /home/aaa.txt 文件 重新命名为 pig.txt，输入：mv aaa.txt pig.txt
    - 将 /home/pig.txt 文件 移动到 /root 目录下，输入：mv pic.txt /root/
    
- 细节
    - mv指令，如果写的是文件名，则当为是重命名
    - 而如果写的是目录，并且没有存在，则当为移动
    
### cat 指令

cat 查看文件内容，是以只读的方式打开

- 语法
    - cat [选项] 要查看的文件

- 常用选项
    - `-n` ：显示行号
    
- 案例
    - 用cat命令，浏览/etc/profile 文件内容，并显示行号，输入cat -n /etc/profile
    
- 细节
    - cat 只能浏览文件，而不能修改文件，为了浏览方便，一般会带上 管道命令 | more
    - 格式：cat 文件名 | more，按空格进行翻页查看下一页
    
### more 指令

more 指令是一个基于 VI 编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。more 指令中内置了若干快捷键，详见操作说明

- 语法
    - more 要查看的文件
    
- 案例
    - 采用 more 查看 /etc/profile 文件，输入：more /etc/profile
    
- 操作功能说明

    - `空格键`：代表向下翻页一页
    - `Enter回车键`：代表向下翻一行
    - `q`：表示立即离开more，不再显示文件内容
    - `Ctrl+f`：向下滚动一屏
    - `Ctrl+b`：返回上一屏
    - `=`：输出当前行的行号
    - `:f`：输出文件名和当前行号

### less 指令

less 指令用来分屏查看文件内容，它的功能与 more 指令类似，但是比 more 指令更加强大，支持 各种显示终端。less 指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示 需要加载内容，对于显示大型文件具有较高的效率。

- 语法
    - less 要查看的文件
    
- 操作功能说明

    - 空白键：向下翻动一页
    - pagedown：向下翻动一页
    - pageup：向上翻动一页
    - 字串/：向下搜寻字串的的功能，n：向下查找，N：向上查找
    - ?子串：向上搜寻字串的的功能，n：向下查找，N：向上查找
    - q：离开less这个程序
    
### > 指令 和 >> 指令

- `>` 指令 和 `>>` 指令
    - `>` 输出重定向 : 会将原来的文件的内容覆盖
    - `>>` 追加： 不会覆盖原来文件的内容，而是追加到文件的尾部。
    
- 语法
    - ls -l >文件 （功能描述：列表的内容写入文件 a.txt 中（覆盖写））
    - ls -al >>文件 （功能描述：列表的内容追加到文件 aa.txt 的末尾）
    - cat 文件 1 > 文件 2 （功能描述：将文件 1 的内容覆盖到文件 2）
    - echo "内容" >> 文件（功能描述：将输入的内容，追加到文件）
    
- 案例
    - 将 /home 目录下的文件列表 写入到 /home/info.txt 中。输入：ls -l /home/ > /home/info.txt
    - 将当前日历信息 追加到 /home/mycal 文件中。使用cal指令可以获取日历。输入：cal >> /home/mycal
    
### echo 指令

echo 输出内容到控制台。

- 语法
    - echo [选项] [输出内容]
    
- 案例
    - 使用 echo 指令输出环境变量,输出当前的环境路径，输入：echo $PATH
        - 输出：/usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
    - 使用 echo 指令输出 hello,world!，输入：echo "hello,world!"
    
### head 指令

head 用于显示文件的开头部分内容，默认情况下 head 指令显示文件的前 10 行内容

- 语法
    - head 文件 (功能描述：查看文件头 10 行内容)
    - head -n 5 文件 (功能描述：查看文件头 5 行内容，5 可以是任意行数)
    
- 案例
    - 查看/etc/profile 的前面 5 行代码，输入：head -n 5 /etc/profile
    
### tail 指令

tail 用于输出文件中尾部的内容，默认情况下 tail 指令显示文件的后 10 行内容。

- 语法
    - tail 文件 （功能描述：查看文件后 10 行内容）
    - tail -n 5 文件 （功能描述：查看文件后 5 行内容，5 可以是任意行数）
    - tail -f 文件 （功能描述：实时追踪该文档的所有更新，工作经常使用）
    
- 案例
    - 查看/etc/profile 最后 5 行的代码，输入：tail -n 5 /etc/profile
    - 实时监控 mydate.txt , 看看到文件有变化时，是否看到， 实时的追加日期
        - 输入：tail -f mydate.txt，监听文件内容变化
        - 再另外一个终端追加日期给mydate.txt文件，输入：ls -l >> mydate.txt
        
### ln 指令

软链接也叫符号链接，类似于 windows 里的快捷方式，主要存放了链接其他文件的路径

- 语法
    - ln -s [原文件或目录] [软链接名] （功能描述：给原文件创建一个软链接）
    
- 案例
    - 在/home 目录下创建一个软连接 linkToRoot，连接到 /root 目录，输入：ln -s /root linkToRoot
    - 删除软连接 linkToRoot，输入：rm -rf linkToRoot

- 细节
    - 进入到软连接目录时，用pwd还是显示软连接目录，而不会显示连接到的目录
    - 删除软连接时，不要加上/，否则会删除真实目录内的内容。也有可能会提示设备或资源忙，一定要去掉/。
    
### history 指令

查看已经执行过历史命令,也可以执行历史指令

- 语法
    - history （功能描述：查看已经执行过历史命令）
    
- 案例
    - 显示所有的历史命令，输入：history
    - 显示最近使用过的 10 个指令，输入：history 10，相当于后10个指令
    - 执行历史编号为 5 的指令，输入：!5，一般会先用history查询指令，再通过!号去执行
    
## 时间日期类

### date 指令-显示当前日期

- 语法
    - date （功能描述：显示当前时间）
    - date +%Y （功能描述：显示当前年份）
    - date +%m （功能描述：显示当前月份）
    - date +%d （功能描述：显示当前是哪一天）
    - date "+%Y-%m-%d %H:%M:%S"（功能描述：显示年月日时分秒）
    
- 案例
    - 显示当前时间信息，输入：date，输出：2020年 08月 13日 星期四 17:01:22 CST
    - 显示当前时间年月日，输入：date "+%Y-%m-%d"，输出：2020-08-13。中间是连接符，可以随意使用，例如使用空格，输入：data "+%Y %m %d"，输出：2020 08 13
    - 显示当前时间年月日时分秒，输入：date "+%Y-%m-%d %H:%M:%S"，输出：2020-08-13 17:08:52
    
### date 指令-设置日期

- 语法
    - date -s 字符串时间（和之前不一样的就是加-s参数）
    
- 案例
    - 设置系统当前时间 ， 比如设置成 2018-10-10 11:22:22